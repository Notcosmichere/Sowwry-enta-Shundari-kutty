<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Kurupey ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --card-dark: #151515;
            --accent-gold: #c5a059;
            --deep-red: #800f2f;
            --text-light: #d3d3d3;
            --parchment: #f2e1b8;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* Standard Animations */
        @keyframes float { 0% { transform: translateY(110vh) rotate(0deg); } 100% { transform: translateY(-10vh) rotate(360deg); } }
        @keyframes heartBeat { 0% { transform: scale(1); } 15% { transform: scale(1.1); } 30% { transform: scale(1); } 45% { transform: scale(1.15); } 100% { transform: scale(1); } }
        
        .heart-bg { position: absolute; color: var(--deep-red); font-size: 18px; pointer-events: none; z-index: 1; animation: float 6s linear infinite; opacity: 0.5; }

        .container {
            background: var(--card-dark);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(0,0,0,0.9);
            width: 90%;
            max-width: 480px;
            z-index: 10;
            text-align: center;
            border: 1px solid #222;
            max-height: 90vh;
            overflow: hidden; /* Changed to hidden to prevent scroll during animation */
            position: relative;
        }

        .screen { display: none; width: 100%; }
        .active { display: flex; flex-direction: column; align-items: center; animation: fadeIn 0.8s ease forwards; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- THE CURTAIN FALL ANIMATION --- */
        #galleryCurtain {
            position: absolute;
            top: -100%; /* Hidden above the container */
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--card-dark);
            z-index: 20;
            transition: top 1s cubic-bezier(0.19, 1, 0.22, 1);
            padding: 25px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }

        #galleryCurtain.dropped {
            top: 0; /* Drops down to cover the screen */
        }

        /* The Rope */
        .rope-container {
            margin: 20px 0;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 15;
        }
        .rope-line { width: 4px; height: 60px; background: #5d4037; border-radius: 2px; }
        .rope-knob { 
            width: 30px; height: 30px; background: var(--accent-gold); 
            border-radius: 50%; border: 3px solid #5d4037; 
            margin-top: -5px; box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            animation: heartBeat 2s infinite;
        }
        .rope-container:active .rope-line { height: 80px; transition: 0.1s; }

        /* Components */
        .scroll-container {
            background: var(--parchment);
            border: 6px double #5d4037;
            padding: 20px;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            text-align: left;
            color: #2b1d1a;
            font-family: 'Georgia', serif;
            line-height: 1.7;
        }

        .photo-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 100%; margin-top: 10px; }
        .photo-grid img { width: 100%; height: 140px; object-fit: cover; border-radius: 12px; border: 2px solid var(--accent-gold); transition: 0.5s; filter: grayscale(60%); }
        .photo-grid img:hover { transform: scale(1.1); filter: grayscale(0%); z-index: 10; }

        .caption-container { margin: 15px 0; min-height: 60px; color: var(--accent-gold); font-style: italic; border: 1px dashed var(--accent-gold); border-radius: 8px; display: flex; align-items: center; justify-content: center; padding: 5px; }

        .certificate-box { background: var(--parchment); border: 8px double #5d4037; padding: 30px 15px; color: #2b1d1a; font-family: 'Georgia', serif; position: relative; width: 100%; box-sizing: border-box; }
        .camera-btn { position: absolute; top: 10px; right: 10px; font-size: 24px; cursor: pointer; }

        #photoOverlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 100; justify-content: center; align-items: center; flex-direction: column;
        }

        button { background: var(--deep-red); color: #fff; border: 1px solid var(--accent-gold); padding: 12px 28px; border-radius: 4px; cursor: pointer; font-weight: bold; margin: 10px; }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="song1.mp3" type="audio/mpeg">
    </audio>

    <div id="photoOverlay" onclick="this.style.display='none'">
        <img src="pic5.jpg" style="max-width: 80%; border: 5px solid white; border-radius: 10px;">
        <h3 style="color: white; margin-top: 20px; text-align: center;">" aysho mateh photo orma onda hehe "</h3>
    </div>

    <div class="container">
        <div id="screen1" class="screen active">
            <img src="cat.gif" style="width:120px; border-radius:50%; border: 2px solid var(--accent-gold);">
            <h2 style="color: var(--accent-gold);">can i say sorry? Kurupeyy?</h2>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button id="yesBtn" onclick="nextScreen(2)" style="animation: heartBeat 1.5s infinite;">YES ‚ù§Ô∏è</button>
                <button id="noBtn" onclick="makeYesBigger()">NO üò¢</button>
            </div>
        </div>

        <div id="screen2" class="screen">
            <h3 style="color: var(--accent-gold);">My Secret Letter üìú</h3>
            <div class="scroll-container">
                <p>kurupey enik ariyathila engane sorry parayanam enn ithrem dooreya ni enne angot varanum ni samadikathila njn possesive ahn vayankare I'm sorry enik ninne athrem ishtayath konda njn ichiri over ahnenki sorry di enik ni iland patila athkondan i love you kurupey mwah njn enna cheyande ith sheri akan ini NJN JELOUS avathila ini avathila ini block akanum parayathila enik hurt avum enn paranjath ni mindna karyam kond alah like orma ondo njn sirriyod paranje avan nink message idum enn paranjapo njn avnod paranju aval (ni) Ninak (sirrik) reply thannal njn avane acha Vilikam enn paranjath orma ondo ? Like i love you well ivane nink ariyavanneya so same alah ik pashe avan oro Karanam ondakikond vannath kando ath enik ariyavanne konda njn angane okke paranje enik ninne nala vishvasam ond ni ottum chance kodkathila pashe ni mindne enik jelous adikum kurupe I'm your bf so normal ahn ni verey anpilatod mindne jelous adiknnath sowwry di i love you so much ni ente jeevana kuripey ni iland enik oru life ilahdi enta Jeevitham mothom njn ninte kudey plan cheyth vechekua njn enta entire life ilu Ninne snehikne athrem arem snehichitila.</p>
            </div>
            <p style="color: var(--accent-gold); font-size: 0.8rem; margin-bottom: 0;">Pull the rope down...</p>
            <div class="rope-container" onclick="dropCurtain()">
                <div class="rope-line"></div>
                <div class="rope-knob"></div>
            </div>
        </div>

        <div id="galleryCurtain">
            <h3 style="color: var(--accent-gold);">Our favorite memories ‚ú®</h3>
            <div class="photo-grid">
                <img src="pic1.jpg" onmouseover="updateCaption('I\'m Not Gonna Let Anyone Else\'s Child Have These Beautiful Eyes I Fell For')" onmouseout="clearCaption()">
                <img src="pic2.jpg" onmouseover="updateCaption('Enta koch enth shundariya kann vekalum arum')" onmouseout="clearCaption()">
                <img src="pic3.jpg" onmouseover="updateCaption('enta ponine enik kananam ee kavl puchanam')" onmouseout="clearCaption()">
                <img src="pic4.jpg" onmouseover="updateCaption('aysho Kadch thinan thonunn enna cute ah kuripey nii mwahh')" onmouseout="clearCaption()">
            </div>
            <div class="caption-container"><p id="hover-caption">Hover over images... ‚ú®</p></div>
            <button onclick="nextFromCurtain(4)">Forgive Me? üíç</button>
        </div>

        <div id="screen4" class="screen">
            <h2 style="color: var(--accent-gold);">Wait... üíç</h2>
            <p>"kuripey ipm nammal cherutha ennalum ninne iple prebook cheythotee sign click chey nml officaly married avum"</p>
            <button onclick="signContract()" style="font-size: 1.4rem; padding: 15px 40px;">SIGN ‚úçÔ∏è</button>
        </div>

        <div id="screen5" class="screen">
            <div class="certificate-box">
                <div class="camera-btn" onclick="document.getElementById('photoOverlay').style.display='flex'">üì∏</div>
                <h2 style="margin:0;">Certificate of Love</h2>
                <p>This certifies that</p>
                <div style="font-size: 1.8rem; font-weight: bold; color: var(--deep-red);">Ameer & Avanthika</div>
                <p>are officially pre-booked for life.</p>
                <div id="sigArea" style="font-family: 'Cursive', cursive; font-size: 1.5rem; border-bottom: 2px solid #5d4037; width: 220px; margin: 20px auto; min-height: 40px;"></div>
            </div>
            <h3 style="color: var(--accent-gold); margin-top: 15px;">I LOVE YOU MY WIFE! ‚ù§Ô∏è</h3>
            <p style="font-size: 0.75rem; color: #777; font-style: italic; margin-top: 10px;">
                "ith ee pathirathri ondaki theerthe enik ni orangne kandapo snkdm vannita sowwry di sathyavayitum njn avde ondayrnenki kal pidich karanj njn paranjene sowry i love you more than anything in this world"
            </p>
        </div>
    </div>

    <script>
        let yesSize = 1, noSize = 1;
        function makeYesBigger() {
            yesSize += 0.5; noSize -= 0.2;
            document.getElementById('yesBtn').style.transform = `scale(${yesSize})`;
            document.getElementById('noBtn').style.transform = `scale(${noSize})`;
            if (noSize <= 0.2) document.getElementById('noBtn').style.display = 'none';
        }

        function nextScreen(num) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen' + num).classList.add('active');
            if(num === 2) document.getElementById('bgMusic').play().catch(e => {});
        }

        // Drop the Gallery Curtain
        function dropCurtain() {
            document.getElementById('galleryCurtain').classList.add('dropped');
        }

        // Move to the next screen from the curtain
        function nextFromCurtain(num) {
            document.getElementById('galleryCurtain').style.display = 'none';
            nextScreen(num);
        }

        function updateCaption(txt) {
            const cap = document.getElementById('hover-caption');
            cap.style.opacity = 0;
            setTimeout(() => { cap.innerText = txt; cap.style.opacity = 1; }, 200);
        }
        function clearCaption() { updateCaption("Hover over images... ‚ú®"); }

        function signContract() {
            confetti({ particleCount: 200, spread: 80, origin: { y: 0.6 }, colors: ['#c5a059', '#800f2f', '#ffffff'] });
            nextScreen(5);
            setTimeout(() => { document.getElementById('sigArea').innerText = "Avanthika Ameer"; }, 1000);
        }

        // Floating Hearts
        const syms = ['‚ù§Ô∏è', 'ü¶ã', '‚ú®', 'üå∏', 'üß∏', 'üíç'];
        setInterval(() => {
            const h = document.createElement('div');
            h.classList.add('heart-bg');
            h.innerHTML = syms[Math.floor(Math.random() * syms.length)];
            h.style.left = Math.random() * 100 + 'vw';
            h.style.animationDuration = (Math.random() * 3 + 4) + 's';
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 6000);
        }, 450);
    </script>
</body>
</html>
